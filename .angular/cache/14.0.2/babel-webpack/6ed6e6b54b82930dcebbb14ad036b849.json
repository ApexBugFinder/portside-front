{"ast":null,"code":"import { select } from '@ngrx/store';\nimport * as projectDataActions from '../../project/state/project.actions';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as fromAuth from '../../auth/state';\nimport * as fromSharedData from '../../shared/userData/state';\nimport * as SharedDataActions from '../../shared/userData/state/userData.actions';\nimport * as fromUserState from '../state';\nimport * as UserActions from '../state/user.actions';\nimport * as ExperienceDataActions from '../../experience/state/experience.actions';\nimport * as CertDataActions from '../../education/Models/certification/state/certification.actions';\nimport * as DegreeDataActions from '../../education/Models/degree/state/degree.actions';\nimport { faUser, faPen, faEye } from '@fortawesome/free-solid-svg-icons';\nimport { MakeGuid } from 'src/app/helpers/make-guid';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ngrx/store\";\n\nfunction ViewUserComponent_app_image_getter_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-image-getter\", 15);\n    i0.ɵɵlistener(\"mediaRtUrl\", function ViewUserComponent_app_image_getter_3_Template_app_image_getter_mediaRtUrl_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.processNewLogoUrlRt($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"Title\", \"Profile Image\")(\"docID\", ctx_r0.user.id)(\"projectCreatorID\", ctx_r0.user.id)(\"typeOfClass\", ctx_r0.getClass())(\"preview\", ctx_r0.user.userPicUrl ? ctx_r0.user.userPicUrl : ctx_r0.profilePic);\n  }\n}\n\nconst _c0 = function () {\n  return [\"edit-profile\"];\n};\n\nconst _c1 = function (a0) {\n  return {\n    \"profile\": a0\n  };\n};\n\nconst _c2 = function (a0) {\n  return {\n    outlets: a0\n  };\n};\n\nconst _c3 = function (a0) {\n  return [a0];\n};\n\nfunction ViewUserComponent_fa_icon_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"fa-icon\", 16);\n    i0.ɵɵlistener(\"click\", function ViewUserComponent_fa_icon_11_Template_fa_icon_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.toggleEdit());\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r1.iconPen)(\"routerLink\", i0.ɵɵpureFunction1(7, _c3, i0.ɵɵpureFunction1(5, _c2, i0.ɵɵpureFunction1(3, _c1, i0.ɵɵpureFunction0(2, _c0)))));\n  }\n}\n\nconst _c4 = function () {\n  return [\"view-profile\"];\n};\n\nfunction ViewUserComponent_fa_icon_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"fa-icon\", 17);\n    i0.ɵɵlistener(\"click\", function ViewUserComponent_fa_icon_13_Template_fa_icon_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.toggleEdit());\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r2.iconEye)(\"routerLink\", i0.ɵɵpureFunction1(7, _c3, i0.ɵɵpureFunction1(5, _c2, i0.ɵɵpureFunction1(3, _c1, i0.ɵɵpureFunction0(2, _c4)))));\n  }\n}\n\nfunction ViewUserComponent_fa_icon_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"fa-icon\", 18);\n    i0.ɵɵlistener(\"click\", function ViewUserComponent_fa_icon_15_Template_fa_icon_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.saveProfile());\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r3.iconUser);\n  }\n}\n\nexport let ViewUserComponent = /*#__PURE__*/(() => {\n  class ViewUserComponent {\n    constructor(dialogRef, router, data, projectStore, experienceStore, certDataStore, degreeDataStore, sharedDataStore, userStore, authStore) {\n      this.dialogRef = dialogRef;\n      this.router = router;\n      this.data = data;\n      this.projectStore = projectStore;\n      this.experienceStore = experienceStore;\n      this.certDataStore = certDataStore;\n      this.degreeDataStore = degreeDataStore;\n      this.sharedDataStore = sharedDataStore;\n      this.userStore = userStore;\n      this.authStore = authStore;\n      this.errorPic = 'gs://portfolio-a7105.appspot.com/defaults/user/Icon ionic-md-person.svg';\n      this.iconUser = faUser;\n      this.iconPen = faPen;\n      this.iconEye = faEye;\n      this.editMode = false;\n      this.sun = '';\n      this.profilePic = 'https://firebasestorage.googleapis.com/v0/b/portfolio-a7105.appspot.com/o/users%2FD8D32EA4-5F9D-4BE9-9535-AB69C3F0A112%2FCertification%2F2F72FA2B-C7DE-4DF3-ABAA-5BE1BC1DA233%2FIssuing%20Body%20Logo?alt=media&token=5c74552a-4cb7-4b88-ad1d-d6d584dec31dhttps://firebasestorage.googleapis.com/v0/b/portfolio-a7105.appspot.com/o/users%2FD8D32EA4-5F9D-4BE9-9535-AB69C3F0A112%2FCertification%2F2F72FA2B-C7DE-4DF3-ABAA-5BE1BC1DA233%2FIssuing%20Body%20Logo?alt=media&token=5c74552a-4cb7-4b88-ad1d-d6d584dec31d';\n      this.eventKey = new MakeGuid().id.toString();\n      this.user$ = this.userStore.pipe(select(fromUserState.getCurrentUserInfo));\n      this.userState$ = this.sharedDataStore.pipe(select(fromSharedData.selectAllUsers));\n      this.isAuth$ = this.authStore.pipe(select(fromAuth.getIsAuthenticated));\n    }\n\n    ngOnInit() {\n      console.log(this.data);\n      this.user = JSON.parse(JSON.stringify(this.data.user));\n      this.userStore.dispatch(new UserActions.SetCurrentUser(this.user));\n      this.sharedDataStore.dispatch(SharedDataActions.selectUser({\n        UserId: this.user.id\n      }));\n      this.user$.subscribe({\n        next: value => {\n          if (value) {\n            this.userToView = value;\n          }\n        },\n        error: err => console.log(\"OOps sorry, error occured getting a User's Information from the user store Profile View component: \", err),\n        complete: () => console.log(\"Completed gettinga User's Information from the user store Profile View component\")\n      });\n      this.router.navigate([{\n        outlets: {\n          profile: 'view-profile'\n        }\n      }]);\n      this.userState$.subscribe({\n        next: value => {\n          if (value.length > 0) {\n            this.userstate = value === null || value === void 0 ? void 0 : value.find(i => (i === null || i === void 0 ? void 0 : i.id) == this.user.id);\n          }\n        }\n      });\n    }\n\n    toBack(key) {\n      // if (key === this.eventKey) {\n      this.dialogRef.close(); // }\n    }\n\n    loadProfile() {\n      this.projectStore.dispatch(projectDataActions.clearProjects());\n      this.projectStore.dispatch(projectDataActions.addProjects({\n        projects: this.data.user.projects\n      }));\n      this.experienceStore.dispatch(ExperienceDataActions.clearExperiences());\n      this.experienceStore.dispatch(ExperienceDataActions.addExperiences({\n        experiences: this.data.user.experiences\n      }));\n      this.certDataStore.dispatch(CertDataActions.clearCertifications());\n      this.certDataStore.dispatch(CertDataActions.addCertifications({\n        Certifications: this.data.user.certifications\n      }));\n      this.degreeDataStore.dispatch(DegreeDataActions.clearDegrees());\n      this.degreeDataStore.dispatch(DegreeDataActions.addDegrees({\n        Degrees: this.data.user.degrees\n      }));\n    }\n\n    toProjects(key) {\n      console.log('HELLO'); //  if (key === this.eventKey) {\n\n      this.loadProfile();\n      this.router.navigate(['pages/projects']);\n      this.dialogRef.close(); // }\n    }\n\n    toExperiences(key) {\n      //  if (key === this.eventKey) {\n      this.loadProfile();\n      this.router.navigate(['pages/experiences']);\n      this.dialogRef.close(); //  }\n    }\n\n    toEducation(key) {\n      // if (key === this.eventKey) {\n      this.loadProfile();\n      this.router.navigate(['pages/education']);\n      this.dialogRef.close(); // }\n    }\n\n    getClass() {\n      return 'User';\n    }\n\n    processNewLogoUrlRt(newAddress) {\n      // update\n      this.userStore.dispatch(new UserActions.SetUserProfileUrl(newAddress));\n      console.log(newAddress);\n      console.log(this.userToView.userPicUrl);\n      console.log(this.user.userPicUrl);\n    }\n\n    toggleEdit() {\n      this.editMode = !this.editMode;\n    }\n\n    userCanSave() {\n      let truth = false;\n\n      if (this.user.email != this.userToView.email || this.user.username != this.userToView.username || this.user.userPicUrl != this.userToView.userPicUrl) {\n        truth = true;\n      }\n\n      return truth;\n    }\n\n    saveProfile() {\n      this.userStore.dispatch(new UserActions.UpdateUser());\n      this.editMode = true;\n    }\n\n  }\n\n  ViewUserComponent.ɵfac = function ViewUserComponent_Factory(t) {\n    return new (t || ViewUserComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i3.Store), i0.ɵɵdirectiveInject(i3.Store));\n  };\n\n  ViewUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ViewUserComponent,\n    selectors: [[\"app-view-user\"]],\n    decls: 20,\n    vars: 10,\n    consts: [[\"mat-dialog-content\", \"\", 1, \"profileContainer\"], [1, \"profilePicContainer\"], [\"alt\", \"\", 1, \"profilePic\", 3, \"profilePic\"], [\"class\", \"logoGetter\", 3, \"Title\", \"docID\", \"projectCreatorID\", \"typeOfClass\", \"preview\", \"mediaRtUrl\", 4, \"ngIf\"], [1, \"profileInfoContainer\"], [1, \"infoContainer\"], [1, \"infoShell\", \"title\"], [1, \"titleHeading\"], [1, \"spacer\"], [\"class\", \"iconPen\", 3, \"icon\", \"routerLink\", \"click\", 4, \"ngIf\"], [\"class\", \"iconEye\", 3, \"icon\", \"routerLink\", \"click\", 4, \"ngIf\"], [\"class\", \"userIcon\", 3, \"icon\", \"click\", 4, \"ngIf\"], [3, \"inputEventKey\", \"back\", \"toProjects\", \"toExperiences\", \"toEducation\"], [1, \"infoContainer\", \"routerWrapper\"], [\"name\", \"profile\", 1, \"routerInput\"], [1, \"logoGetter\", 3, \"Title\", \"docID\", \"projectCreatorID\", \"typeOfClass\", \"preview\", \"mediaRtUrl\"], [1, \"iconPen\", 3, \"icon\", \"routerLink\", \"click\"], [1, \"iconEye\", 3, \"icon\", \"routerLink\", \"click\"], [1, \"userIcon\", 3, \"icon\", \"click\"]],\n    template: function ViewUserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"img\", 2);\n        i0.ɵɵtemplate(3, ViewUserComponent_app_image_getter_3_Template, 1, 5, \"app-image-getter\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"div\", 7)(8, \"p\");\n        i0.ɵɵtext(9, \"Profile\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(10, \"div\", 8);\n        i0.ɵɵtemplate(11, ViewUserComponent_fa_icon_11_Template, 1, 9, \"fa-icon\", 9);\n        i0.ɵɵpipe(12, \"async\");\n        i0.ɵɵtemplate(13, ViewUserComponent_fa_icon_13_Template, 1, 9, \"fa-icon\", 10);\n        i0.ɵɵpipe(14, \"async\");\n        i0.ɵɵtemplate(15, ViewUserComponent_fa_icon_15_Template, 1, 1, \"fa-icon\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(16, \"mat-divider\");\n        i0.ɵɵelementStart(17, \"app-profile-buttons\", 12);\n        i0.ɵɵlistener(\"back\", function ViewUserComponent_Template_app_profile_buttons_back_17_listener($event) {\n          return ctx.toBack($event);\n        })(\"toProjects\", function ViewUserComponent_Template_app_profile_buttons_toProjects_17_listener($event) {\n          return ctx.toProjects($event);\n        })(\"toExperiences\", function ViewUserComponent_Template_app_profile_buttons_toExperiences_17_listener($event) {\n          return ctx.toExperiences($event);\n        })(\"toEducation\", function ViewUserComponent_Template_app_profile_buttons_toEducation_17_listener($event) {\n          return ctx.toEducation($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 13);\n        i0.ɵɵelement(19, \"router-outlet\", 14);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"profilePic\", ctx.userToView.userPicUrl ? ctx.userToView.userPicUrl : ctx.profilePic);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.editMode);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(12, 6, ctx.isAuth$) && !ctx.editMode);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(14, 8, ctx.isAuth$) && ctx.editMode);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.userCanSave());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"inputEventKey\", ctx.eventKey);\n      }\n    },\n    styles: [\"mat-dialog-container[_ngcontent-%COMP%]{overflow:hidden;width:560px}.profileContainer[_ngcontent-%COMP%]{display:flex;overflow:hidden;flex-direction:row;column-gap:20px;width:560px;overflow-x:hidden;margin:0;justify-content:flex-start;align-items:flex-start}.profileContainer[_ngcontent-%COMP%]   .profilePicContainer[_ngcontent-%COMP%]{width:200px;margin:auto;display:flex;justify-content:center;row-gap:20px;flex-direction:column;justify-items:center}.profileContainer[_ngcontent-%COMP%]   .profilePicContainer[_ngcontent-%COMP%]   .profilePic[_ngcontent-%COMP%]{position:relative;align-self:center;width:150px;height:150px;margin-top:20px;margin-bottom:10px;border:none;box-shadow:none;visibility:hidden}.profileContainer[_ngcontent-%COMP%]   .profilePicContainer[_ngcontent-%COMP%]   .profilePic[_ngcontent-%COMP%]:before{width:150px;height:150px;box-shadow:none;align-self:center;background-repeat:no-repeat;border:none;content:\\\"\\\";position:absolute;visibility:visible;background-image:url(https://firebasestorage.googleapis.com/v0/b/portfolio-a7105.appspot.com/o/defaults%2Fuser%2FIcon%20ionic-md-person.svg?alt=media&token=de900d75-57db-4d92-b0db-3ccd1bdf6c04)}.profileContainer[_ngcontent-%COMP%]   .profilePicContainer[_ngcontent-%COMP%]   img.profilePic[_ngcontent-%COMP%]:not([src]){visibility:hidden}.profileContainer[_ngcontent-%COMP%]   .profilePicContainer[_ngcontent-%COMP%]   fa-icon.userIcon[_ngcontent-%COMP%]{font-size:20px;width:auto;margin:auto}.profileContainer[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:80%}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]{width:400px}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]{width:85%;margin:auto}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoContainer.infoContainer.infoButtons[_ngcontent-%COMP%]{width:100%}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoContainer.infoButtons[_ngcontent-%COMP%]   .infoShell[_ngcontent-%COMP%]{margin-top:40px;column-gap:50px}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoShell.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoShell.title[_ngcontent-%COMP%]   .titleHeading[_ngcontent-%COMP%]{width:80%;font-family:futura-pt;font-size:16px}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoShell.title[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:auto}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoShell.title[_ngcontent-%COMP%]   .iconPen[_ngcontent-%COMP%], .profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoShell.title[_ngcontent-%COMP%]   .iconEye[_ngcontent-%COMP%]{margin-right:20px;justify-self:flex-end}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   .infoContainer[_ngcontent-%COMP%]   .infoContainer.routerWrapper[_ngcontent-%COMP%]{height:250px;margin:10px}.profileContainer[_ngcontent-%COMP%]   .profileInfoContainer[_ngcontent-%COMP%]   app-profile-buttons[_ngcontent-%COMP%]{margin-top:0}\"]\n  });\n  return ViewUserComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}